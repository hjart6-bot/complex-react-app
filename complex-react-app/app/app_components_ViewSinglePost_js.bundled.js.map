{"version":3,"sources":["webpack://complex-react-app/./app/components/NotFound.js","webpack://complex-react-app/./app/components/ViewSinglePost.js"],"names":["NotFound","ViewSinglePost","props","appState","useContext","StateContext","appDispatch","StateDispatch","id","useParams","isLoading","setIsLoading","useState","post","setPost","useEffect","ourRequest","Axios","fetchPost","response","cancelToken","token","data","e","console","log","cancel","date","Date","createdDate","dateFormatted","getMonth","getDate","getFullYear","isOwner","loggedIn","user","username","author","deleteHandler","areYouSure","window","confirm","type","value","history","push","title","_id","avatar","body","withRouter"],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;;AAEA,SAASA,QAAT,GAAoB;AAClB,sBACE,iDAAC,0CAAD;AAAM,SAAK,EAAC;AAAZ,kBACE;AAAK,aAAS,EAAC;AAAf,kBACE,iGADF,eAEE;AAAG,aAAS,EAAC;AAAb,+CAC2B,iDAAC,kDAAD;AAAM,MAAE,EAAC;AAAT,gBAD3B,2BAFF,CADF,CADF;AAUD;;AAED,iEAAeA,QAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAC7B,QAAMC,QAAQ,GAAGC,iDAAU,CAACC,kDAAD,CAA3B;AACA,QAAMC,WAAW,GAAGF,iDAAU,CAACG,qDAAD,CAA9B;AACA,QAAM;AAAEC;AAAF,MAASC,2DAAS,EAAxB;AACA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BC,+CAAQ,CAAC,IAAD,CAA1C;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBF,+CAAQ,EAAhC;AAEAG,kDAAS,CAAC,MAAM;AACd,UAAMC,UAAU,GAAGC,+DAAA,EAAnB;;AAEA,mBAAeC,SAAf,GAA2B;AACzB,UAAI;AACF,cAAMC,QAAQ,GAAG,MAAMF,gDAAA,CAAW,SAAQT,EAAG,EAAtB,EAAyB;AAAEY,qBAAW,EAAEJ,UAAU,CAACK;AAA1B,SAAzB,CAAvB;AACAP,eAAO,CAACK,QAAQ,CAACG,IAAV,CAAP;AACAX,oBAAY,CAAC,KAAD,CAAZ;AACD,OAJD,CAIE,OAAOY,CAAP,EAAU;AACVC,eAAO,CAACC,GAAR,CAAY,mDAAZ;AACD;AACF;;AACDP,aAAS;AACT,WAAO,MAAM;AACXF,gBAAU,CAACU,MAAX;AACD,KAFD;AAGD,GAhBQ,EAgBN,CAAClB,EAAD,CAhBM,CAAT;;AAkBA,MAAI,CAACE,SAAD,IAAc,CAACG,IAAnB,EAAyB;AACvB,wBAAO,iDAAC,8CAAD,OAAP;AACD;;AAED,MAAIH,SAAJ,EACE,oBACE,iDAAC,0CAAD;AAAM,SAAK,EAAC;AAAZ,kBACE,iDAAC,qDAAD,OADF,CADF;AAMF,QAAMiB,IAAI,GAAG,IAAIC,IAAJ,CAASf,IAAI,CAACgB,WAAd,CAAb;AACA,QAAMC,aAAa,GAAI,GAAEH,IAAI,CAACI,QAAL,KAAkB,CAAE,IAAGJ,IAAI,CAACK,OAAL,EAAe,IAAGL,IAAI,CAACM,WAAL,EAAmB,EAArF;;AAEA,WAASC,OAAT,GAAmB;AACjB,QAAI/B,QAAQ,CAACgC,QAAb,EAAuB;AACrB,aAAOhC,QAAQ,CAACiC,IAAT,CAAcC,QAAd,IAA0BxB,IAAI,CAACyB,MAAL,CAAYD,QAA7C;AACD;;AACD,WAAO,KAAP;AACD;;AAED,iBAAeE,aAAf,GAA+B;AAC7B,UAAMC,UAAU,GAAGC,MAAM,CAACC,OAAP,CAAe,yCAAf,CAAnB;;AACA,QAAIF,UAAJ,EAAgB;AACd,UAAI;AACF,cAAMrB,QAAQ,GAAG,MAAMF,mDAAA,CAAc,SAAQT,EAAG,EAAzB,EAA4B;AAAEc,cAAI,EAAE;AAAED,iBAAK,EAAElB,QAAQ,CAACiC,IAAT,CAAcf;AAAvB;AAAR,SAA5B,CAAvB;;AACA,YAAIF,QAAQ,CAACG,IAAT,IAAiB,SAArB,EAAgC;AAC9B;AACAhB,qBAAW,CAAC;AAAEqC,gBAAI,EAAE,cAAR;AAAwBC,iBAAK,EAAE;AAA/B,WAAD,CAAX,CAF8B,CAG9B;;AACA1C,eAAK,CAAC2C,OAAN,CAAcC,IAAd,CAAoB,YAAW3C,QAAQ,CAACiC,IAAT,CAAcC,QAAS,EAAtD;AACD;AACF,OARD,CAQE,OAAOd,CAAP,EAAU;AACVC,eAAO,CAACC,GAAR,CAAY,sBAAZ;AACD;AACF;AACF;;AAED,sBACE,iDAAC,0CAAD;AAAM,SAAK,EAAEZ,IAAI,CAACkC;AAAlB,kBACE;AAAK,aAAS,EAAC;AAAf,kBACE,6DAAKlC,IAAI,CAACkC,KAAV,CADF,EAEGb,OAAO,mBACN;AAAM,aAAS,EAAC;AAAhB,kBACE,iDAAC,mDAAD;AAAM,MAAE,EAAG,SAAQrB,IAAI,CAACmC,GAAI,OAA5B;AAAoC,gBAAS,MAA7C;AAAoD,gBAAS,MAA7D;AAAoE,aAAS,EAAC;AAA9E,kBACE;AAAG,aAAS,EAAC;AAAb,IADF,CADF,eAIE,iDAAC,kDAAD;AAAc,MAAE,EAAC,MAAjB;AAAwB,aAAS,EAAC;AAAlC,IAJF,EAIwD,GAJxD,eAKE;AAAG,WAAO,EAAET,aAAZ;AAA2B,gBAAS,QAApC;AAA6C,gBAAS,QAAtD;AAA+D,aAAS,EAAC;AAAzE,kBACE;AAAG,aAAS,EAAC;AAAb,IADF,CALF,eAQE,iDAAC,kDAAD;AAAc,MAAE,EAAC,QAAjB;AAA0B,aAAS,EAAC;AAApC,IARF,CAHJ,CADF,eAiBE;AAAG,aAAS,EAAC;AAAb,kBACE,iDAAC,mDAAD;AAAM,MAAE,EAAG,YAAW1B,IAAI,CAACyB,MAAL,CAAYD,QAAS;AAA3C,kBACE;AAAK,aAAS,EAAC,aAAf;AAA6B,OAAG,EAAExB,IAAI,CAACyB,MAAL,CAAYW;AAA9C,IADF,CADF,6BAIY,iDAAC,mDAAD;AAAM,MAAE,EAAG,YAAWpC,IAAI,CAACyB,MAAL,CAAYD,QAAS;AAA3C,KAA+CxB,IAAI,CAACyB,MAAL,CAAYD,QAA3D,CAJZ,UAI4FP,aAJ5F,CAjBF,eAwBE;AAAK,aAAS,EAAC;AAAf,kBACE,iDAAC,uDAAD;AAAe,UAAM,EAAEjB,IAAI,CAACqC,IAA5B;AAAkC,gBAAY,EAAE,CAAC,WAAD,EAAc,QAAd,EAAwB,UAAxB,EAAoC,MAApC,EAA4C,SAA5C,EAAuD,MAAvD,EAA+D,UAA/D;AAAhD,IADF,CAxBF,CADF;AA8BD;;AAED,iEAAeC,4DAAU,CAAClD,cAAD,CAAzB,E","file":"app_components_ViewSinglePost_js.bundled.js","sourcesContent":["import React from \"react\"\r\nimport Page from \"./Page\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\nfunction NotFound() {\r\n  return (\r\n    <Page title=\"Not Found\">\r\n      <div className=\"text-center\">\r\n        <h2>Whoops, we cannot find that page.</h2>\r\n        <p className=\"lead text-muted\">\r\n          You can always visit the <Link to=\"/\">homepage</Link> to get a fresh start.\r\n        </p>\r\n      </div>\r\n    </Page>\r\n  )\r\n}\r\n\r\nexport default NotFound\r\n","import React, { useEffect, useState, useContext } from \"react\"\r\nimport Page from \"./Page\"\r\nimport { useParams, Link, withRouter } from \"react-router-dom\"\r\nimport Axios from \"axios\"\r\nimport LoadingDotsIcon from \"./LoadingDotsIcon\"\r\nimport ReactMarkdown from \"react-markdown\"\r\nimport ReactTooltip from \"react-tooltip\"\r\nimport NotFound from \"./NotFound\"\r\nimport StateContext from \"../StateContext\"\r\nimport StateDispatch from \"../DispatchContext\"\r\n\r\nfunction ViewSinglePost(props) {\r\n  const appState = useContext(StateContext)\r\n  const appDispatch = useContext(StateDispatch)\r\n  const { id } = useParams()\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [post, setPost] = useState()\r\n\r\n  useEffect(() => {\r\n    const ourRequest = Axios.CancelToken.source()\r\n\r\n    async function fetchPost() {\r\n      try {\r\n        const response = await Axios.get(`/post/${id}`, { cancelToken: ourRequest.token })\r\n        setPost(response.data)\r\n        setIsLoading(false)\r\n      } catch (e) {\r\n        console.log(\"There was a problem or the request was cancelled.\")\r\n      }\r\n    }\r\n    fetchPost()\r\n    return () => {\r\n      ourRequest.cancel()\r\n    }\r\n  }, [id])\r\n\r\n  if (!isLoading && !post) {\r\n    return <NotFound />\r\n  }\r\n\r\n  if (isLoading)\r\n    return (\r\n      <Page title=\"loading...\">\r\n        <LoadingDotsIcon />\r\n      </Page>\r\n    )\r\n\r\n  const date = new Date(post.createdDate)\r\n  const dateFormatted = `${date.getMonth() + 1}/${date.getDate()}/${date.getFullYear()}`\r\n\r\n  function isOwner() {\r\n    if (appState.loggedIn) {\r\n      return appState.user.username == post.author.username\r\n    }\r\n    return false\r\n  }\r\n\r\n  async function deleteHandler() {\r\n    const areYouSure = window.confirm(\"Do you really want to delete this post?\")\r\n    if (areYouSure) {\r\n      try {\r\n        const response = await Axios.delete(`/post/${id}`, { data: { token: appState.user.token } })\r\n        if (response.data == \"Success\") {\r\n          // 1. display a flash message\r\n          appDispatch({ type: \"flashMessage\", value: \"Post was successfully deleted.\" })\r\n          //2. redirect back to the current user's profile\r\n          props.history.push(`/profile/${appState.user.username}`)\r\n        }\r\n      } catch (e) {\r\n        console.log(\"There was a problem.\")\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Page title={post.title}>\r\n      <div className=\"d-flex justify-content-between\">\r\n        <h2>{post.title}</h2>\r\n        {isOwner() && (\r\n          <span className=\"pt-2\">\r\n            <Link to={`/post/${post._id}/edit`} data-tip=\"Edit\" data-for=\"edit\" className=\"text-primary mr-2\">\r\n              <i className=\"fas fa-edit\"></i>\r\n            </Link>\r\n            <ReactTooltip id=\"edit\" className=\"custom-tooltip\" />{\" \"}\r\n            <a onClick={deleteHandler} data-tip=\"Delete\" data-for=\"delete\" className=\"delete-post-button text-danger\">\r\n              <i className=\"fas fa-trash\"></i>\r\n            </a>\r\n            <ReactTooltip id=\"delete\" className=\"custom-tooltip\" />\r\n          </span>\r\n        )}\r\n      </div>\r\n\r\n      <p className=\"text-muted small mb-4\">\r\n        <Link to={`/profile/${post.author.username}`}>\r\n          <img className=\"avatar-tiny\" src={post.author.avatar} />\r\n        </Link>\r\n        Posted by <Link to={`/profile/${post.author.username}`}>{post.author.username}</Link> on {dateFormatted}\r\n      </p>\r\n\r\n      <div className=\"body-content\">\r\n        <ReactMarkdown source={post.body} allowedTypes={[\"paragraph\", \"strong\", \"emphasis\", \"text\", \"heading\", \"list\", \"listItem\"]} />\r\n      </div>\r\n    </Page>\r\n  )\r\n}\r\n\r\nexport default withRouter(ViewSinglePost)\r\n"],"sourceRoot":""}